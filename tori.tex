\documentclass{amsart}

\usepackage{amscd}
\usepackage{amssymb, amsfonts}
\usepackage{amsrefs}
\usepackage[T1]{fontenc}
\usepackage{tikz}
\usepackage{tikz-cd}


%%%% Definitions of things you already have %%%%%%%%%%
\newcommand{\Q}{{\mathbb Q}}
\newcommand{\F}{{\mathbb F}}
\newcommand{\Z}{{\mathbb Z}}

\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\ri}{\mathcal{O}}

\DeclareMathOperator{\gal}{Gal}
\DeclareMathOperator{\res}{Res}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\loc}{Loc}
\DeclareMathOperator{\ind}{c-Ind}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Hom}{Hom}

\newcommand{\GL}{\mathbf {GL}}
\newcommand{\bG}{\mathbf{G}}
\newcommand{\bT}{\mathbf {T}}
\newcommand{\bS}{\mathbf{S}}
\newcommand{\bR}{\mathbf{R}}

\newcommand{\can}{\mathrm{can}}
\newcommand{\ff}{{\mathfrak f}}

%%%% Motivic  definitions %%%%%%%

\newcommand\lef{\mathbb L}
\newcommand\cE{{\mathcal E}}
\newcommand\mot{\mathrm{mot}}
\newcommand{\Ner}[1]{\mathcal{#1}}
\newcommand{\NerC}[1]{\mathcal{#1}^\circ}

\def\llp{\mathopen{(\!(}}
\def\rrp{\mathopen{)\!)}}


%%%%%%%%%%%%% Theorem declarations %%%%%%%%%%%%%
\theoremstyle{plain}
\newtheorem{thm}{Theorem}
\newtheorem{theorem}[thm]{Theorem}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}

\theoremstyle{definition}
\newtheorem{rem}[thm]{Remark}
\newtheorem{defn}[thm]{Definition}
\newtheorem{example}[thm]{Example}


\title[]{Canonical measure on a reductive $p$-adic group is motivic}
\author{Julia Gordon and David Roe}

\begin{document}

\begin{abstract}  Let $G$ be a connected reductive group over a non-Archimedean local field. 
We prove that its parahoric subgroups are definable in the Denef-Pas language, which is a
first-order language of logic used in the theory of motivic integration developed by Cluckers and Loeser.
The main technical result is the definability of the connected component of the N\'eron model
of a tamely ramified algebraic torus.  As a corollary, we prove that the canonical Haar measure on $G$,
which assigns volume $1$ to the particular \emph{canonical} maximal parahoric defined by
Gross in \cite{gross:97a}, is motivic. This result resolves a technical difficulty that arose in
\cite{cluckers-gordon-halupczok:14b} and \cite{shin-templier:15a}*{Appendix B} and permits a simplification of some of the proofs in those articles. 
It also allows us to show that formal degree of a compactly induced representation is a
motivic function of the parameters defining the representation. 
\end{abstract}
\maketitle

\section{Introduction}
The goal of this paper is to complete a technical step in the 
definable formulation of 
the representation theory of $p$-adic groups, a project started by T.C. Hales in 1999. 
Here, the word ``definable'' is as in the theory of motivic integration developed by R. Cluckers and F. Loeser \cite{cluckers-loeser:08a}.

Specifically, we will prove that the parahoric subgroups of a connected reductive $p$-adic group
are definable using the Denef-Pas language, which is the language used in the Cluckers-Loeser
theory of motivic integration and its applications to representation theory of $p$-adic groups.
As a consequence, we prove that the canonical Haar measure on a connected reductive group 
(which assigns the volume $1$ to the canonical parahoric subgroup constructed by B. Gross \cite{gross:97a}) is motivic.

For unramified groups, this statement has been known for a while \cite{cluckers-hales-loeser}.
For ramified groups, the definition of the canonical smooth model of a $\bG$ relies on the
N\'eron model of a maximal torus in $\bG$, which does not behave well with respect to Galois descent.
The main technical result of this paper is that the connected component of the N\'eron model
of a tamely ramified torus is definable in the language of Denef-Pas. The difficulty in proving this result
is caused by the fact that ``taking the connected component'' is not an operation that can be easily
described by first-order logic. 

This paper is split into two sections, the first leading up to Proposition \ref{prop:NerCdefinable},
which shows that the connected component of the N\'eron model of a torus is definable,
and the second giving applications to canonical measures and formal degrees.

We begin Section \ref{sec:tori} by setting up notation and briefly reviewing the Denef-Pas language.  In order
to give formulas defining $\bT(F)$ and $\NerC{T}(\ri_F)$  (where $\NerC{T}$ denotes the connected
component of the N\'eron model of the torus $\bT$) in this language, we need to parameterize the possible tori $\bT$.
In Section \ref{sub:fixedchoices}, we describe the choices that can be made without reference to variables in $F$,
such as fixing an abstract Galois group $\Gamma$ and a lattice with action of $\Gamma$ which will play the role of the cocharacter lattice of $\bT$.
Section \ref{sub:def_tori} then parameterizes field extensions with Galois group $\Gamma$, resulting in a parameterization
of tori over $F$.  Finally, in Section \ref{sub:NerCdefinable} we show that $\NerC{T}(\ri_F)$ is a definable subgroup of $\bT(F)$.
In Section 3 we prove two easy corollaries mentioned above, namely, that the canonical measure is motivic,
and in a definable family of compactly-induced irreducible representations, formal degree is motivic. 

\section{Tori} \label{sec:tori}
We will use the notions of definable sets and definable functions, which will always refer to the Denef-Pas language. 
Formulas in the Denef-Pas language can have variables of three \emph{sorts}: valued field (which will be denoted by \emph{VF}),
residue field (denoted by \emph{RF}) and the value group. Even though we will often be working with ramified extensions,
we always start with a local field $F$ with normalized valuation, so the value group is $\Z$
(the \emph{VF}-variables will range over $F$, and so their valuations will be in $\Z$).
Formulas in the Denef-Pas language can be interpreted given a choice of a valued field \emph{together with a uniformizer}. 
We refer the reader to \cite{cluckers-gordon-halupczok:14c} and references therein for the definitions of the Denef-Pas language, definable sets, etc. 

For us, $F$ will always be a non-Archimedean local field: either $\F_q\llp t\rrp$ or a finite extension of $\Q_p$.
As a consequence of the definition of a definable set, all statements in this paper will hold for any $F$ of sufficiently large residue characteristic $p$, 
though we will give no effective bound on $p$. 
Given an integer $M>0$, we will denote by $\loc_M$ the collection of non-Archimedean local fields
with residue characteristic greater than $M$. 

For such a local field $F$, we will denote its ring of integers by $\ri_F$, its residue field by $k_F$,
and let $q_F=\# k_F$. The symbol $\varpi$ or $\varpi_F$ will stand for the uniformizer of the valuation on $F$. 
A formula in the Denef-Pas language  with $n$ free \emph{VF}-variables, $m$ free \emph{RF}-variables, and $r$ free 
$\Z$-variables 
defines a subset of $F^n\times k_F^m \times \Z^r$. 
We will denote the definable set $F^n\times k_F^m \times \Z^r$ itself by
$\mbox{\emph{VF}}^n\times \mbox{\emph{RF}}^m\times \Z^r$.
In earlier works on motivic integration this set was denoted by $h[n,m,r]$. 
We will talk about definable subsets of $\mbox{\emph{VF}}^n\times \mbox{\emph{RF}}^m\times \Z^r$,
meaning the subsets defined by Denef-Pas formulas with the right number of free variables of each sort, as above. 
For a definable subset $X\subset \mbox{\emph{VF}}^n\times \mbox{\emph{RF}}^m\times \Z^r$, and given a local field $F$,  
we will denote by $X(F)$ the \emph{specialization} of $X$ in $F$, i.e., the subset of
$F^n\times k_F^m\times \Z^r$ obtained by interpreting in $F$ all the formulas defining the set $X$.\footnote{This
is the notation used in \cite{gordon-hales:15a}; note that traditionally in the motivic integration literature,
the {specialization} of a definable set $X$ was denoted by $X_F$, but this notation generates too many subscripts for us.} 

We start by setting up the framework for working with tori in the Denef-Pas language,
following \cite{cluckers-hales-loeser}, \cite{cluckers-gordon-halupczok:14b} and \cite{gordon-hales:15a}.



\subsection{Fixed choices}\label{sub:fixedchoices}

As in \cite{gordon-hales:15a}*{\S 2.1}, we begin by outlining our \emph{fixed choices},
which are made before writing any formulas in the Denef-Pas language.  
For each \emph{fixed choice} (which will be completely field-independent), we will further describe
a definable set of parameters (which will then be allowed to range over a valued field $F$,
its residue field $k_F$ or $\Z$), in such a way that each tuple of parameters gives rise to an algebraic torus
defined over $F$, and all isomorphism classes of algebraic $F$-tori arise via this construction.

We fix a finite group $\Gamma$ and a normal subgroup $I \unlhd \Gamma$,
as well as enumerations of their elements $\Gamma = \{\sigma_1, \dots, \sigma_m\}$ and
$I = \{\sigma_1, \dots, \sigma_e\}$.  We make the convention that $\sigma_1 = 1$ and $\sigma_m$
generates $\Gamma / I$.\footnote{Note that we do not assume that $\sigma_m$ is the Frobenius element, since $p$ is not fixed.}
When we eventually construct a torus $\bT$ from the fixed choices
and corresponding parameters, these groups will play the roles of $\gal(E/F)$
and its inertia subgroup, where $E$ is the splitting field of $\bT$.

In order to define a torus $\bT$, we will use the equivalence of categories between $F$-tori and
free $\Z$-modules with a Galois action.  To this end, we fix a positive integer $n$ and an injective homomorphism
\begin{equation} \label{eq:theta}
\theta : \Gamma \hookrightarrow \GL_n(\Z),
\end{equation}
which gives $\Z^n$ an action of $\Gamma$.  The $\Gamma$-module $X$ defined by $\theta$ will play the role of $X_\ast(\bT)$.

Finally, we fix a resolution of $X$ by an induced $\Gamma$-module $Y$, i.e. a surjective map
$Y \to X$ where $Y$ has a basis permuted by $\Gamma$ (cf. \cite{brahm:thesis}*{Satz 0.4.4}).
To specify $Y$, we just give the matrix for the map $Y \to X$ of free abelian groups,
together with the matrices giving $\gamma : Y \to Y$ for $\gamma \in \Gamma$.
This resolution will allow us to definably cut out the connected component of the N\'eron model inside $\bT(F)$.

\subsection{Parameterizing field extensions and tori}\label{sub:def_tori}
 
We encode field extensions in the same way as in \cite{cluckers-gordon-halupczok:14b}.
Namely, we parameterize Galois extensions $E/F$ with $\gal(E/F) \cong \Gamma$
and realize all tori over $F$ that split over $E$ with cocharacter lattice $X$.
This parameterizes such tori as members of a family of definable sets,
for all $F$ of sufficiently large residue characteristic. 

We will write $L$ for the unramified subextension of $E/F$.  In order to encode the data of the extension tower $E/L/F$,
we let $f=m/e$ and introduce parameters $b_0,\dots, b_{f-1}$, ranging over $\ri_F$.
We set $b(x)=x^f+b_{f-1}x^{f-1}+ \dots + b_0$. 
Similarly, we introduce parameters $c_0, \dots, c_{e-1}$, ranging over $L$
(i.e., each is given by an $f$-tuple of elements of $F$) and set $c(y) = y^e + c_{e-1}y^{e-1} + \dots + c_0$.

We impose the following conditions on these parameters, all of which are definable by formulas in the Denef-Pas language. 
\begin{enumerate}
\item The reduction of $b(x)$ modulo $\varpi_F$ is irreducible over $k_F$. 
This ensures that $F[x]/(b(x))$ is a degree $f$ unramified field extension of $F$. 
We denote this extension by $L$, and once and for all fix an identification with $F^f$ as 
an $F$-vector space. 
\item The polynomial $c(x)$ is Eisenstein: $\ord_L(c_0) = 1$ and $\ord_L(c_i) \ge 1$ for all $i$.
We further assume that the resulting extension $E = L[x]/(c(x))$ is Galois over $F$.
We fix an identification of $E$ with $L^e$ as $L$-vector spaces, and thus with $F^m$ as $F$-vector spaces. 
\item The field automorphisms of $E$ over $F$, as specified by $m \times m$ matrices over $F$, form a group isomorphic to $\Gamma$.
We will write $\sigma_i$ for the matrix as well as the corresponding element of $\Gamma$.
\item The automorphisms $\sigma_1, \dots, \sigma_e$ fix $L$, and the restriction of $\sigma_m$ to $L$ has order $f$.
\end{enumerate}
We denote by $\cE_\Gamma$ the space of parameters $(b_0, \dots, b_{f-1}, c_0, \dots, c_{e-1}, \sigma_1, \dots, \sigma_m)$ with these properties,
thought of as a definable subset of some large affine space over $F$.
For each local field $F$, every element of $\cE_\Gamma$ gives rise to a tower of field extensions $E/L/F$
with $\gal(E/F)$ isomorphic to $\Gamma$ and satisfying all the above conditions.
The homomorphism $\theta$ of \eqref{eq:theta} then defines a torus $\bT$ over $F$ with cocharacter lattice $X$ that splits over $E$.
More precisely, the set $E^\times \otimes X$ can be encoded as an open and definable subset
of an affine space over $F$ depending only on the fixed choices $X$ and $m$.
The group $\Gamma$ acts on $E^\times$ by means of the matrices $\sigma_i$ and on $X$
via the fixed choice $\theta$, and thus it acts on $E^\times \otimes X$ as well. 
This action is definable, and therefore the set $\bT(F) = \bT(E)^\Gamma$ is as well.

Note that different parameters in $\cE_\Gamma$ may yield isomorphic extensions,
but that every isomorphism class of $E/F$ with Galois group $\Gamma$
arises from some element of $\cE_\Gamma$.  Moreover, as $\theta$ ranges over all homomorphisms
$\Gamma \hookrightarrow \GL_n(\Z)$,\footnote{There are infinitely many choices of $\theta$
but we never quantify over them; instead, we work with each such fixed choice separately.}
all possible cocharacter lattices of tori of dimension $n$ appear. Therefore every $F$-torus
arises via this construction, since it is determined by its splitting field and cocharacter lattice viewed as a $\Gamma$-module. 
\begin{example}
Suppose $\Gamma = I = \Z / 2\Z$ and $n=1$; note that $\theta$ is uniquely determined in this case.
For $p > 2$, the two ramified quadratic extensions of $F$ appear as members of the same family,
one for the polynomial $c(x) = x^2-\varpi$, another for the polynomial $c(x) = x^2-\epsilon\varpi$,
where $\epsilon \in \ri_F^\times$ is a non-square.
Recall that the interpretation of formulas in the Denef-Pas language depends not just on the field,
but also on the choice of uniformizer. In this case, a different choice of the uniformizer
would swap these two extensions, but both would still appear.
The torus $\bT$ is the the one-dimensional unitary group that splits over $E$.
\end{example}
\begin{rem}
While we have not constrained $\Gamma$ in such a way that $E/F$ is automatically tame,
if $\Gamma$ is not the semidirect product of two cyclic groups then
$\cE_\Gamma$ will be empty for large enough residue characteristic.  In this case, from the point of view
of motivic integration, $\cE_\Gamma$ is indistinguishable from the empty set.
\end{rem}

\subsection{The identity component of the N\'eron model} \label{sub:NerCdefinable}

Now that we have parameterized $E/L/F$ and $\bT$ and shown that $\bT(F)$ definable, we may prove the main technical result of the paper.
Write $\Ner{T}$ for the N\'eron model of $\bT$ (cf. \cite{bosch-lutkebohmert-reynaud:NeronModels}*{Ch. 10});
this is a model for $\bT$ over $\ri_F$ with the property that $\Ner{T}(\ri_F) = \bT(F)$.  Let $\NerC{T}$ be its identity component.

\begin{prop} \label{prop:NerCdefinable}
The subset $\NerC{T}(\ri_F) \subseteq \bT(F)$ is definable.
\end{prop}
\begin{proof}
We first reduce to the case that $L = F$: if $\NerC{T}(\ri_L)$ is definable then so is
$\NerC{T}(\ri_F) = \NerC{T}(\ri_L)^\Gamma$, where the equality holds since N\'eron models commute with unramified base change.
So for the remainder of the proof we will assume that $E/F$ is totally ramified.

Now, the identity component $\NerC{T}(\ri_F)$ is the kernel of the map $w_\bT : \bT(L) \to X_I$ from
$\Ner{T}(\ri_L)$ to its component group  defined in \cite{kottwitz:isocrystals-2}*{\S 7} (see also \cite{bitan:11a}*{3.1}).

Our fixed choice of resolution $Y \to X$ yields an induced torus $\bR$ over $L$ with cocharacter lattice $Y$, together with a diagram
\[
\begin{tikzcd}
\bR(L) \rar{\alpha} \dar{w_{\bR}} \drar{\beta} & \bT(L) \rar \dar{w_{\bT}} & 1 \\
Y_I \rar & X_I \rar & 0
\end{tikzcd}
\]
as in \cite{kottwitz:isocrystals-2}*{(7.2.6)}.  The map $\bR(L) = (E^\times \times Y)^I \to (E^\times \times X)^I = \bT(L)$
is definable since it is induced by the fixed map $Y \to X$.  Since $\bR$ is induced,
$Y_I$ is torsion free and $w_\bR : \bR(L) \to Y_I = \Hom(X^\ast(\bR), \Z)$ is given by
$r \mapsto \left(\lambda \mapsto \ord_{L}(\lambda(r))\right)$ \cite{kottwitz:isocrystals-2}*{(7.2.3)}.
Therefore $w_\bR$ is definable, and so is the composition $\beta : \bR(L) \to X_I$ with the fixed map $Y_I \to X_I$.

We can now show that $\NerC{T}(\ri_L)$ is a definable subset of $\bT(L)$: we have $t \in \NerC{T}(\ri_L)$
if and only if $\exists r \in \bR(L)$ such that $\alpha(r) = t$ and $\beta(r) = 0$.
\end{proof}

\section{General reductive groups}
Let $\bG$ be a connected quasi-split reductive algebraic group defined over a local field $F$,
let $\ff$ be a facet in the building of $\bG$ over $F$, and let $x$ be in the interior of $\ff$. 
In this section we construct a family of definable sets that specialize to the parahoric subgroup ${G}_{\ff}:={\bG}(F)_{x, 0}$.
It was previously shown in \cite{cluckers-gordon-halupczok:14b} that for all \emph{positive} $r$ and all \emph{optimal} points $x$ in the building,
the Moy-Prasad filtration subgroups ${\bG}(F)_{x, r}$ are definable; here we fill in the missing case where
$r=0$.\footnote{When $r=0$, the group ${\bG}(F)_{x,0}$ depends only on the facet containing $x$,
so we do not restrict to the case that $x$ is optimal.}

\subsection{Reductive groups as a family of definable sets}
We treat reductive groups in the definable setting as in \cite{gordon-hales:15a} and \cite{cluckers-gordon-halupczok:14b}.
In fact, our construction of algebraic tori above in \S \ref{sub:def_tori} is a special case of this construction.
In particular, we have the \emph{fixed choices} that include the absolute root datum $\Sigma$ of $\bG$
and the Galois action on the absolute root datum (which we suppress from the notation).
Finally, given $\Sigma$, we also fix a finite set $\cF_\Sigma$ that encodes
the set of faces of an alcove in the building of $\bG$, as in \cite{gordon-hales:15a}*{\S 2.1}.\footnote{The fact that
$\cF_\Sigma$ depends only on $\Sigma$ with its Galois action follows from the explicit description of parahoric subgroups in \cite{gross:parahorics}.}  

We recall that each  fixed choice determines  a split reductive group $\bG^{\ast\ast}$ and an embedding 
$\bG^{\ast\ast}(F)\hookrightarrow {\mathbf GL}_N(F)$ for every local field $F$ of sufficiently large residue characteristic.  
Moreover, as in \cite{gordon-hales:15a}*{\S 2.2}, we have a parameter space $Z$ encoding field extensions and Galois cocycles. We note that to determine a quasi-split group $\bG$, one only needs to know the absolute root datum, the Galois action on it (which is part of our \emph{fixed choices}), and the field extension that splits $\bG$. Thus, for quasi-split groups, the only information the parameter $z$ carries is the information about the field extension (cf. \cite{gordon-hales:15a}*{\S 2.2.2}). 
We denote the space of cocycles encoding the quasi-split groups by $Z^\ast$. 

The parameter space  $Z$ has the property that, for every local field $F$ of sufficiently large residue characteristic, a pair
$(\Sigma, z)\in Z$ determines a connected reductive group $\bG(F)$, and every
isomorphism class of connected reductive group arises via this construction.\footnote{Here
$\Sigma$ denotes the fixed choices determining $\bG^{\ast\ast}$ and the outer automorphism that determines the quasi-split form $\bG^\ast$ of $\bG$;  $z$ is a parameter ranging over an
$F$-vector space that determines a field extension over which $\bG$ splits and the Galois cocycle corresponding to $\bG$.} 
In summary, we have the following 
\begin{theorem}\label{thm:def_groups}(\cite{gordon-hales:15a}*{\S 2.2.2}, \cite{cluckers-gordon-halupczok:14b}*{\S 3.1}). 
 For every fixed choice $\Sigma$ of root datum, there exists $M>0$ and a definable set $\cG \to Z$ with the following property:
for every $F\in \loc_M$ and $z \in Z(F)$, ${\cG_z}(F)$ is the set of $F$-points of a connected reductive group
$\bG_z$ with absolute root datum $\Sigma$.  Moreover, every isomorphism class of $F$-groups with absolute root datum 
$\Sigma$ arises as a fiber $\cG_z$ for some $z\in Z(F)$.  
The group $\bG$ is quasi-split over $F$ if and only if $z\in Z^\ast$. 
\end{theorem}

\subsection{Definability of maximal parahorics} 
Our main result is that the parahoric subgroups associated with facets in the building of $\bG$ via Bruhat-Tits theory are definable.
More precisely, let $\bG$ be a tamely ramified, quasi-split, connected reductive group defined over a local field $F$.
Let $\ff$ be a facet in the building of $\bG$.  The next proposition shows that
then the parahoric $\bG(F)_\ff\subset \bG(F)$ arises in a definable family of definable sets. 
In particular, the canonical parahoric of $\bG(F)$ defined in \cite{gross:97a} is definable. 

For the moment, we only consider quasi-split groups.
\begin{prop}\label{prop:main}
 Let $\Sigma$, $Z$ and $\cG\to Z$ be as in Theorem \ref{thm:def_groups}, let 
 $\cF_{\Sigma}$ parameterize the facets of an alcove in the building of $\bG_z$ as above,
 and suppose that $\ff \in \cF_\Sigma$.  
Then there exists $M>0$ (depending only on $\Sigma$) and a family of definable subsets $\cG_{\ff} \to Z^\ast$ of $\cG$
 such that, for all $F\in \loc_M$ and $z\in Z^\ast(F)$, 
\[
{\cG_{\ff}}_{z}(F)= \bG_z(F)_{\ff}.
\]
\end{prop}

\begin{proof} Let $\bT$ be a maximal torus containing the maximal $F$-split torus in $\bG$; let $x$ be the baricenter of $\ff$.
By definition, $\bG(F)_{x,0}$ is generated by $\bT(F)_{x, 0}$ and $U_\psi$, where the $U_\psi$ are
the filtration subgroups of the unipotent one-parameter subgroups $U_{\alpha}$. 
We have shown in Proposition \ref{prop:NerCdefinable} above that  $\bT(F)_{x, 0}$ is definable.
The rest of the proof is identical to that of Lemma 3.4 in \cite{cluckers-gordon-halupczok:14b}.  
\end{proof} 

\subsection{Applications} 
As an immediate consequence, we obtain that the canonical measure is motivic, up to a motivic constant.
This statement was previously known for unramified reductive groups \cite{cluckers-hales-loeser}.
We recall that a \emph{motivic constant} is an element of the ring of constructible motivic functions on a point,
i.e., of $A:=\Z[\lef, \lef^{-1}, \frac{1}{1-\lef^{-i}}, i>0]$ where $\lef$ is a formal symbol which specializes to $q$.

For a connected quasi-split reductive group $\bG$ over a local field $F$, we denote the \emph{canonical Haar measure}
on $\bG(F)$, which assigns volume $1$ to the canonical parahoric, by $d\mu_{\bG(F)}^\can$. 
Note that this seems to be the standard definition of the canonical measure in all settings
where it is used to define global orbital integrals, but it differs from Gross' canonical measure
exactly by the $L$-factor of the motive associated with $\bG$ \cite{gross:97a}.  For general $\bG$, using the same method as Gross, 
we define $d\mu_{\bG(F)}^\can$ as the pull-back of the canonical (in our sense) measure from the quasi-split inner form $\bG^\ast$ of $\bG$.  

\begin{theorem}\label{thm:mot_meas}
 Let $\Sigma$, $Z$  and $\cG \to Z$ be as in Theorem \ref{thm:def_groups}. 
Then there exists $M>0$ (depending only on $\Sigma$), a family of  motivic measures
$d\mu_z$ on $\cG_z$, and a motivic function $c:Z\to A$ such that, for every $F\in \loc_M$,
\[
c_F(z) d\mu_{\bG_z(F)}^\can = d\mu_{z, F}.
\]
Here $d\mu_{\bG_z(F)}^\can$ is the canonical measure on $\bG_z(F)=\cG_z(F)$,
and $d\mu_{z, F}$ is the specialization to $F$ of the motivic measure $d\mu_z$ on the definable set $\cG_z$. 
\end{theorem} 

\begin{proof} There exists a motivic Haar measure on $\bG_z$ for every $z\in Z(F)$,
constructed e.g. in \cite{gordon-hales:15a}*{\S 2.3}. Let us denote this measure by $\mu_z^\mot$. Now, suppose 
$z\in Z^\ast(F)$, so that the associated group $\bG_z$ is quasi-split.  
Then it has the canonical parahoric subgroup as in \cite{gross:97a}, associated with a special point $x$ in the building. 
By Proposition \ref{prop:main}, the canonical parahoric $\bG_z(F)_{x, 0}$ is definable, so we can define  a motivic function $c(z):=\vol_{\mu_z^\mot}({\cG_{\ff}}_z)$. 
By definition, we have 
\[
c_F(z) d\mu_{\bG_z(F)}^\can = d\mu_{z, F}^\mot.
\]
For general $z$, it follows that the canonical measure is motivic, since the inner twisting is a definable map
(using $z$, $z^\ast$ as parameters; cf. \cite{cluckers-gordon-halupczok:14b}*{\S 3.5.2}) and the pull-back of a motivic measure under a definable map is motivic.
\end{proof}

\begin{rem} The above theorem allows a number of improvements in \cite{cluckers-gordon-halupczok:14b} and 
\cite{shin-templier:15a}*{Appendix B}. 
Namely,  parts (1) and (2) of \cite{cluckers-gordon-halupczok:14b}*{Lemma 3.4} become unnecessary, and the statement in Part (3)
now includes $r=0$; instead of using the measures discussed in \S 3.5.2, one can use the canonical measure. 
More importantly, in \cite{shin-templier:15a}*{Appendix B, \S B.5.2}, Definition 14.13 and Lemma 14.14
become unnecessary, and in all calculations one can take $i_M=1$, which simplifies the rest of the proof.
\end{rem}




Finally, Theorem \ref{thm:mot_meas} implies that formal degree in definable families of
supercuspidal representations is a motivic function of the parameters indexing the family. 
Recall that formal degree of a representation depends on the choice of Haar measure on 
$\bG(F)/C$, where $C$ is the center of $\bG(F)$. 
In the following corollary, we use the canonical measure. 
 
\begin{cor} Let $\Sigma$, $Z$  and $\cG \to Z$ be as in Theorem \ref{thm:def_groups}, and let $M>0$ be the constant from Theorem \ref{thm:mot_meas}.
Suppose that we are given a definable family of compact subgroups $J_{z, \lambda} \subset \cG_z$,
parameterized by $z \in Z$ and $\lambda$ in some definable set.
In addition, let $\sigma_{z, \lambda}(F)$ be an irreducible representation of $J_{z, \lambda}(F)$ of fixed dimension $d$.
Assume that $\pi_{z,\lambda}(F) := \ind_{J_{z,\lambda}(F)}^{\bG_z(F)} \sigma_{z,\lambda}(F)$
is irreducible for $z \in Z(F)$ and $F \in \loc_M$.
Then the formal degree (with respect to the canonical measure as above) of $\pi_{z, \lambda}$ is of the form 
\[
d_{\pi_{z, \lambda}}=\frac{c(z)d}{m(z, \lambda)},
\]
where $c(z)$ is the motivic function of Theorem \ref{thm:mot_meas}, and $m(z, \lambda)$ is a motivic function of $z, \lambda$. 
\end{cor}
\begin{proof}
It is well-known\footnote{Sufficiently well known that we could not find a reference.} that
\[
d_{\pi_{z, \lambda}}=\frac{\deg(\sigma_{z, \lambda})}{\vol_{\mu_{\bG_z(F)}^\can}(J_{z, \lambda})}.
\]
By Theorem \ref{thm:mot_meas}, we have 
$\vol_{\mu_{\bG_z(F)}^\can}(J_{z, \lambda}) = \frac{\vol_{\mu_z}(J_{z, \lambda})}{c(z)}$,
and the statement follows, with $m(z, \lambda)=\vol_{\mu_z}(J_{z, \lambda})$.
\end{proof}

\subsubsection{Gross' canonical volume form}
We conclude with a remark about the canonical volume form and the motive of a reductive group. 
Here assume that $\bG$ is quasi-split. In  \cite{gross:97a}*{\S 4}, Gross defined the canonical volume form
$\omega_G$ on $G=\bG(F)$ associated with the canonical smooth model 
$\underline{G}^0$ of $G$ whose set of $\ri_F$-points is the canonical maximal parahoric subgroup. 
One can ask if this volume form itself gives rise to a motivic measure. 
A priori, the smooth group scheme $\underline{G}^0$ is defined over $\ri_F$, and thus it is not clear why the
associated volume form can be defined \emph{uniformly in $F$} using the Denef-Pas language.
However, we observe that the motive $M$ associated with $\bG$ can be determined directly from the fixed choices defining $\bG$,
since $\bG$ is quasi-split.
Now by \cite{gross:97a}*{Proposition 4.7}, the volume of the canonical parahoric with respect to $|\omega_G|$
is a motivic constant.\footnote{More precisely, the volume is a motivic function of the parameter $z$ defining the group.}  
Thus, the measure $|\omega_G|$ is motivic as well, since it is a product of a motivic function
and a motivic measure that we have denoted by $\mu_{\bG(F)}^\can$ above. 


\bibliography{roebib/Biblio}

%\begin{bibdiv}
%\begin{biblist}
%\bibselect{references}
%\end{biblist}
%\end{bibdiv}

\end{document}


