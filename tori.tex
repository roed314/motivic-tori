\documentclass{amsart}

\usepackage{amscd}
\usepackage{amssymb, amsfonts}
\usepackage[notcite, notref]{showkeys}
\usepackage{amsrefs}
\input xy
\xyoption{all}
%\input{Gdefinitions3.tex}
\usepackage{color}
\usepackage[T1]{fontenc}
\usepackage{tikz}
%\usetikzlibrary{shapes,arrows,calc,matrix}
\usepackage{tikz-cd}
\usepackage{mathrsfs}

\definecolor{bettergreen}{rgb}{0,.7,0}
\newcommand\blue[1]{{\color{blue}{#1}}}
\newcommand\green[1]{{\color{bettergreen}{#1}}}
\newcommand\red[1]{{\color{red}{#1}}}

%\long\def\comment#1{\marginpar{{\footnotesize\color{red} #1\par}}}
%\long\def\commentimmi#1{\marginpar{{\footnotesize\color{bettergreen} #1\par}}}
%\long\def\change#1{{\color{blue} #1}}
%newcommand\green[1]{{\color{green} #1}}
%\newcommand   [1]{{\color{red}\small #1}}

%\let\immi=\green

%\let\raf=\blue


%%%% Definitions of things you already have %%%%%%%%%%
\newcommand{\Q}{{\mathbb Q}}
\newcommand{\C}{{\mathbb C}}
\newcommand{\R}{{\mathbb R}}
\newcommand{\F}{{\mathbb F}}
\newcommand{\Z}{{\mathbb Z}}
\newcommand{\N}{{\mathbb N}}
%\newcommand{\bA}{{\mathbb A}}
\newcommand{\LL}{{\mathbb L}}

\def\CC{{\mathbb C}}
\def\ZZ{{\mathbb Z}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cO}{\mathcal{O}}


\newcommand{\bF}{\mathbf{F}}
\newcommand{\ri}{\mathcal{O}}
\newcommand{\gl}{\mathfrak{gl}}
\newcommand{\GL}{\mathbf {GL}}
\newcommand{\fg}{\mathfrak{g}}
\newcommand{\ft}{\mathfrak{t}}
\newcommand{\fz}{\mathfrak{z}}
\newcommand{\fsp}{\mathfrak{sp}}
\newcommand{\fsl}{\mathfrak{sl}}
\newcommand{\Ad}{\operatorname{Ad}}
\newcommand{\jac}{\operatorname{Jac}}
\newcommand{\gal}{\operatorname{Gal}}
\newcommand{\res}{\operatorname{Res}}
\newcommand{\vol}{\operatorname{vol}}
\newcommand{\loc}{\operatorname{Loc}}
\newcommand{\ind}{\operatorname{c-Ind}}

\newcommand{\aut}{\mathbf{Aut}}
\newcommand{\reg}{\mathrm{reg}}
%\newcommand{\spl}{\mathrm{sp}}
\newcommand{\ur}{\mathrm{ur}}


\newcommand{\ep}{\operatorname{EP}}
\newcommand{\cM}{\mathcal {M}}
\newcommand{\cL}{\mathcal {L}}

\newcommand{\ram}{\mathrm{Ram}}
%\newcommand{\sem}{\mathrm{ss}}
\newcommand{\A}{\mathbb{A}}

%\newcommand{\bG}{\mathbf {G}}
\newcommand{\bG}{\mathbf{G}}
\newcommand{\bT}{\mathbf {T}}
\newcommand{\bS}{\mathbf{S}}
\newcommand{\bR}{\mathbf{R}}
\newcommand{\bM}{\mathbf {M}}
\newcommand{\cV}{\mathcal{V}}
\newcommand{\can}{\mathrm{can}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\ff}{{\mathfrak f}}

%\newcommand{\ug}{{\mathrm U}}
%\newcommand{\fs}{{\mathfrak s}}

\newcommand{\oi}{{\bf \mathrm{O}}}


\newcommand{\rf}{k}

%%%% Motivic  definitions %%%%%%%

\newcommand{\ldp}{{\mathcal L}_{\mathrm {DP}}}
\newcommand\ldpo[1][\ri]{{\mathcal L}_{#1}}
\newcommand\cmf[1]{{\mathcal C}(#1)}
\newcommand\cA{{\mathcal A}}
%\newcommand\co{{\mathcal O}}
\newcommand\cB{{\mathcal B}}
\newcommand\ac{\overline{\mathrm{ac}}}
\newcommand\lef{\mathbb L}
\newcommand\cP{{\mathcal P}}
\newcommand\cC{{\mathcal C}}
\newcommand\cE{{\mathcal E}}
\newcommand\cX{{\mathcal X}}
%\newcommand\bT{{\mathbf T}}
\newcommand\mot{\mathrm{mot}}
\newcommand\spl{\mathrm{spl}}
\newcommand{\scD}{\mathscr{D}}


\newcommand{\de}{{\text{Def}}}
\newcommand{\rde}{{\text{RDef}}}
\newcommand{\K}{F}
\newcommand{\mexp}{\mathbf{e}}
\newcommand{\Ner}[1]{\mathcal{#1}}
\newcommand{\NerC}[1]{\mathcal{#1}^\circ}

\def\llp{\mathopen{(\!(}}
\def\llb{\mathopen{[\![}}
\def\rrp{\mathopen{)\!)}}
\def\rrb{\mathopen{]\!]}}

\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Hom}{Hom}

%%%%%%%%%%%%% Theorem declarations %%%%%%%%%%%%%
\theoremstyle{plain}
\newtheorem{thm}{Theorem}
\newtheorem{theorem}[thm]{Theorem}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{cor}[thm]{Corollary}
%\newtheorem{defn}[thm]{Definition}
%\newtheorem{rem}[thm]{Remark}
\newtheorem{prop}[thm]{Proposition}

\theoremstyle{definition}
\newtheorem{rem}[thm]{Remark}
\newtheorem{defn}[thm]{Definition}
\newtheorem{example}[thm]{Example}


\title[]{Motivic measures and the motive of a reductive group}
\author{Julia Gordon and David Roe}

\begin{document}

\maketitle

\section{Introduction}
\subsection{}
The goal of this paper is to complete a technical step in the 
``motivic" formulation of 
the representation theory of $p$-adic groups, that was started by T. Hales in 1999. 
Here  the word ``motivic'' refers to the use of the theory of motivic integration, as developed by R. Cluckers and F. Loeser in \cite{cluckers-loeser}; in this paper, no integration will be required, so ``definable'' would have been a better term to use. 

Specifically, our goal is to prove that the canonical maximal parahoric subgroup of a connected reductive $p$-adic group, as defined by Gross in \cite{gross:motive} using Bruhat-Tits theory, is definable using Denef-Pas language, which is the language used in Cluckers-Loeser theory of motivic integration and, consequently,  in all its applications to representation theory of $p$-adic groups. As a consequence, we  prove that for any connected reductive group the canonical Haar measure 
%(in the sense of \cite{gross:motive}) 
(which assigns the volume $1$ to the canonical parahoric subgroup) is motivic.
Consequently, for any  definable family of supercuspidal representations, formal degree is a motivic function of the parameters indexing the family. 

In fact, for unramified groups this statement has been known for a while, cf. \cite{cluckers-hales-loeser}. However, for a ramified group $\bG$, there is a difficulty caused by the fact that the canonical smooth model of $\bG$, whose definition relies on the N\'eron model of a maximal torus in $\bG$, does not behave well with respect to Galois descent. Thus, the main technical difficulty we deal with in this paper is proving that the connected component of the N\'eron model of a tamely ramified torus is definable in the language of Denef-Pas. We note that this difficulty is largely caused by the fact that ``taking the connected component'' is not, naturally, an operation that can easily be described by first-order logic. 



\subsection{}This paper is split into two sections, the first leading up to Proposition \ref{prop:NerCdefinable},
which shows that the connected component of the N\'eron model of a torus is definable,
and the second giving applications to canonical measures and formal degrees.

We begin Section \ref{sec:tori} by setting up notation and briefly reviewing the Denef-Pas language.  In order
to give formulas defining $\bT(F)$ and $\NerC{T}(\ri_F)$ in this language, we need to parameterize the possible tori $\bT$.
In Section \ref{sub:fixedchoices}, we describe the choices that can be made without reference to variables in $F$,
such as fixing an abstract Galois group $\Gamma$ and a character lattice with action of $\Gamma$.
Section \ref{sub:def_tori} then parameterizes field extensions with Galois group $\Gamma$, resulting in a parameterization
of tori over $F$.  Finally, in Section \ref{sub:NerCdefinable} we show that $\NerC{T}(\ri_F)$ is a definable subgroup of $\bT(F)$.

{\bf XX Summarize section 3}
\subsection{A note about the title}
The use of the word ``motivic'' in ``motivic integration'', though quite appropriate in a philosophical sense, is often misleading. In the original formulation of \cite{denef-loeser:p-adic}, the motivic measure takes values in a certain completion of the Grothendieck ring of the category of Chow motives. 
In the later foundational work \cite{cluckers-loeser}, which is currently used in applications to representation theory, 
this ring has been replaced with the Grothendieck ring of the category of certain  \emph{definable subassignments}, which, however, is still closely related to the Chow motives. 
Thus, we can say that in this paper we associate a Chow motive with every reductive group $\bG$ defined over a local field, namely, the motivic volume of its canonical maximal parahoric (our whole purpose is to prove that such a motivic volume is defined). So naturally, one might want to ask what is the relationship between this motivic volume and the motive associated to $\bG$ by Gross, in the same paper \cite{gross:motive} where he defines the canonical parahoric subgroup that we are discussing here. 
The  answer, however, seems to be rather unsatisfactory. 

In \cite{gross:motive}, the group  $\bG$ is defined over a global field $F$; the motive associated with it is an Artin-Tate motive $M$, and its key property is that at each finite place $v$, the local factor of the Artin L-function  associated with it is precisely the volume of the canonical parahoric subgroup at 
$\bG(F_v)_{x, 0}$  at $v$ with respect to a natural measure on $\bG(F_v)$. 
By proving that the subgroup $\bG(F_v)_{x, 0}$  is definable and this natural measure is \emph{motivic} in the sense of motivic integration, we associate a Chow motive (over $\Q$) with $\bG$.
A priori, we can say that this Chow motive has the property that its trace of Frobenius at $v$ coincides with the volume of $\bG(F_v)$ for almost all $v$; then in particular, it coincides with the Artin $L$-factor of $M$ at $v$. This looks like a nice relationship, except for the ``almost all $v$'' part. 
The group $\bG$ is unramified at almost all places, and at unramified places both $M$ and the Chow motive we can associate with $\bG$ are not as interesting (the Chow motive in question then is basically the image in the appropriate ring of motives of the smooth model of $\bG$ at a hyper-special point, associated with it by Bruhat-Tits theory), so we are not saying anything new compared to \cite{gross:motive}. 

The new part of our result is about the places $v$ where $\bG$ is ramified, but in order to think of the ramified places we must depart from thinking of an algebraic group defined over a global field, and instead fix a root datum (including the information about the Galois group of the splitting field, and its action on the root datum) of a reductive group over a \emph{local} field. In the end, we can say that we associate an element of a suitable Grothendieck ring (in a first approximation, a Chow motive) with such a root datum, and for all but finitely many primes $p$, the trace of Frobenius on this Chow motive (with the definition appropriately extended to the suitable ring) returns the volume of the canonical maximal parahoric $\bG(F)_{x, 0}$ defined in \cite{gross:motive} for all local fields $F$ of residue characteristic greater than some fixed number $M$ that depends only on the root datum. 
Thus, our approach is intrinsically local, even though the local field is allowed to vary, and we still need to exclude some primes (which depend only on the root datum fixed from the start). 

For our results to be applicable to a group $\bG$ defined over a global field, 
with a given  prescribed root data of ramified local components, 
$\bG$ would be allowed to have the given type of ramification, just  it would need to happen at large enough primes. In short, one could say that our results are applicable to groups over global fields, provided they do not ramify at small primes (how ``small'' is, unfortunately, not effective, and depends on the ramification one wants to allow). 

\section{Tori} \label{sec:tori}
We will use the notions of a definable set and definable function, which will always refer to Denef-Pas language. 
Formulas in Denef-Pas language can have variables of three \emph{sorts}: valued field (which will be denoted by $VF$), residue field (denoted by $RF$) and the value group. Even though we will be often be working with ramified extensions, we always start with a local field $F$ with normalized valuation, so the value group is $\Z$ (the $VF$-variables will range over $F$, and so their valuations will be in $\Z$).
Formulas in Denef-Pas language can be interpreted given a choice of a valued field \emph{together with a uniformizer}. 
We refer the reader to \cite{CGH-ad}  and references therein for the definitions of Denef-Pas language, definable sets, etc. 

For us, $F$ will always be a non-Archimedean local field: either $\F_q\llp t\rrp$ or a finite extension of $\Q_p$.
As a consequence of the definition of a definable set, all statements in this paper will hold for any $F$ of sufficiently large residue characteristic $p$, 
though we will give no effective bound on $p$. 
Given an integer $M>0$, we will denote by $\loc_M$ the collection of non-Archimedean local fields that are finite extensions of $\Q_p$ or $\F_p((t))$ with residue characteristic greater than $M$. 

Since we have to assume that $p$ is large relative to some fixed parameters, such as the degree of the extension $E/F$ over which our torus splits, we may assume that $E/F$ is tame.  

For such a local field $F$, we will denote its ring of integers by $\ri_F$, its residue field by $k_F$, and let $q_F=\# k_F$. The symbol $\varpi_F$ will always stand for the uniformizer of the valuation on $F$; when there is no possibility of confusion, we might drop the subscript $F$. 
A formula in Denef-Pas language  with $n$ free $VF$-variables, $m$ free $RF$-variables, and $r$ free 
$\Z$-variables 
defines a subset of $F^n\times k_F^m \times \Z^r$. 
We will denote the definable set $F^n\times k_F^m \times \Z^r$ itself by $VF^n\times RF^m\times \Z^r$. In earlier works on motivic integration this set was denoted by $h[n,m,r]$. 
We will talk about definable subsets of $VF^n\times RF^m\times \Z^r$, meaning the subsets defined by Denef-Pas formulas with the right number of free variables of each sort, as above. 
For  a definable subset $X\subset VF^n\times RF^m\times \Z^r$, and given a local field $F$,  
we will denote by $X(F)$ the \emph{specialization} of $X$ in $F$, i.e., a subset of $F^n\times k_F^m\times \Z^r$ obtained by interpreting in $F$ all the formulas defining the set $X$. 
(This is the notation used in \cite{hales:transfert}; note that traditionally in the motivic integration literature, the {specialization} of a definable set $X$ was denoted by $X_F$, but this notation generates too many subscripts for us). 

We start by setting up the framework for working with tori in the Denef-Pas language, following \cite{cluckers-hales-loeser}, \cite{CGH-2} and \cite{hales:transfert}.



\subsection{Fixed choices}\label{sub:fixedchoices}

As in \cite{hales:transfert}*{\S 2.1}, we begin by outlining our \emph{fixed choices}, which are made before writing any formulas in the Denef-Pas language.  
In this way, we split the definition of the torus $\bT$ into choices made without reference to the base field $F$ and formulas determining the dependence on $F$.

We fix a finite group $\Gamma$ and a normal subgroup $I \unlhd \Gamma$, as well as enumerations of their elements $\Gamma = \{\sigma_1, \dots, \sigma_m\}$ and $I = \{\sigma_1, \dots, \sigma_e\}$.  We make the convention that $\sigma_1 = 1$ and $\sigma_m$ generates $\Gamma / I$.  These groups will play the role of $\Gal(E/F)$ and its inertia subgroup, where $E$ is the splitting field of $\bT$.

In order to define a torus $\bT$, we will use the equivalence of categories between $F$-tori and free $\Z$-modules with a Galois action.  To this end, we fix a positive integer $n$ and an injective homomorphism
\begin{equation} \label{eq:theta}
\theta : \Gamma \hookrightarrow \GL_n(\Z),
\end{equation}
which gives $\Z^n$ an action of $\Gamma$.  The $\Gamma$-module $X$ defined by $\theta$ will play the role of $X_\ast(\bT)$.

Finally, we fix a resolution of $X$ by an induced $\Gamma$-module $Y$, i.e. a surjective map $Y \to X$ where $Y$ has a basis permuted by $\Gamma$ (c.f. \cite{brahm:thesis}*{Satz 0.4.4}).  To specify $Y$, we just give the matrix for the map $Y \to X$ of free abelian groups, together with the matrices giving $\gamma : Y \to Y$ for $\gamma \in \Gamma$. This resolution will allow us to definably cut out the connected component of the N\'eron model inside $\bT(F)$.

%an abstract split torus ${\bT}^\spl$ and an isomorphism $X^\ast(\bT^\spl) \cong \Z^n$.
%\footnote{in contrast to \cite{cluckers-hales-loeser}, where they parameterize $X^\ast(\bT^\spl)$ using valued field variables, since they need characters as functions to $F^\times$.}
%In order to define $\bT$ as a twist of $\bT^\spl$, we fix a homomorphism


\subsection{Parameterizing field extensions and tori}\label{sub:def_tori}
 
We encode field extensions in the same way as in \cite{CGH-2}.
Namely, we parameterize Galois extensions $E/F$ with $\Gal(E/F) \cong \Gamma$
and realize all tori over $F$ that split over $E$ with character lattice $X$.
This parameterizes such tori as members of a family of definable sets,
for all $F$ of sufficiently large residue characteristic. 

We will write $L$ for the unramified subextension of $E/F$.  In order to encode the data of the extension tower $E/L/F$, we let $f=m/e$ and introduce parameters $b_0,\dots, b_{f-1}$, ranging over $\ri_F$.
We set $b(x)=x^f+b_{f-1}x^{f-1}+ \dots + b_0$. 
Similarly, we introduce parameters $c_0, \dots, c_{e-1}$, ranging over $L$
(i.e., each is given by an $f$-tuple of elements of $F$) and set $c(y) = y^e + c_{e-1}y^{e-1} + \dots + c_0$.

We impose the following conditions on these parameters, all of which are definable by formulas in the Denef-Pas language. 
\begin{enumerate}
\item The reduction of $b(x)$ modulo $\varpi_F$ is irreducible over $k_F$. 
This ensures that $F[x]/(b(x))$ is a degree $f$ unramified field extension of $F$. 
We denote this extension by $L$, and once and for all fix an identification with $F^f$ as 
an $F$-vector space. 
\item The polynomial $c(x)$ is Eisenstein: $\ord_L(c_0) = 1$ and $\ord_L(c_i) \ge 1$ for all $i$.
We further assume that the resulting extension $E = L[x]/(c(x))$ is Galois over $F$.
We fix an identification of $E$ with $L^e$ as $L$-vector spaces, and thus with $F^m$ as $F$-vector spaces. 
\item The field automorphisms of $E$ over $F$, as specified by $m \times m$ matrices over $F$, form a group isomorphic to $\Gamma$.
We will write $\sigma_i$ for the matrix as well as the corresponding element of $\Gamma$.
\item The automorphisms $\sigma_1, \dots, \sigma_e$ fix $L$, and the restriction of $\sigma_m$ to $L$ has order $f$.
\end{enumerate}
We denote by $\cE_\Gamma$ the space of parameters $(b_0, \dots, b_{f-1}, c_0, \dots, c_{e-1}, \sigma_1, \dots, \sigma_m)$ with these properties,
thought of as a definable subset of some large affine space over $F$.
For each local field $F$, every element of $\cE_\Gamma$ gives rise to a tower of field extensions $E/L/F$
% Note that we don't actually need to require that F has large residue characteristic in this claim.
with $\gal(E/F)$ isomorphic to $\Gamma$ and satisfying all the above conditions.
The homomorphism $\theta$ of \eqref{eq:theta} then defines a torus $\bT$ over $F$ with cocharacter lattice $X$.
This torus splits over $E$, with $\gal(E/F) \cong \Gamma$ acting on $\bT(E) = E^\times \otimes X$ diagonally.
This action is definable, and therefore the set $\bT(F) = \bT(E)^\Gamma$ is as well.

Note that different parameters in $\cE_\Gamma$ may yield isomorphic extensions, but that all isomorphism classes of $E/F$ with Galois group $\Gamma$
arise from some element of $\cE_\Gamma$.  Moreover, as $\theta$ ranges over all homomorphisms $\Gamma \hookrightarrow \GL_n(\Z)$, all tori of dimension $n$ with splitting field $E$ will appear.
\begin{example}
Suppose $\Gamma = I = \Z / 2\Z$ and $n=1$; note that $\theta$ is uniquely determined in this case.
For $p > 2$, the two ramified quadratic extensions of $F$ appear as members of the same family,
one for the polynomial $c(x) = x^2-\varpi$, another for the polynomial $c(x) = x^2-\epsilon\varpi$,
where $\epsilon \in \ri_F^\times$ is a non-square.
Recall that the interpretation of formulas in Denef-Pas language depends not just on the field,
but also on the choice of uniformizer. In this case, a different choice of the uniformizer
would cause these two extensions to switch places, but they would still both appear.
The torus $\bT$ is the the one-dimensional unitary group that splits over $E$.
\end{example}
%\begin{rem}
%We observe that in this context we cannot use standard number-theoretic constructions involving objects such as the cyclotomic polynomial, since we need to be able to let $F$ with its residue characteristic vary, and thus polynomials whose degree depends on $p$ are not allowed. For the same reason, we cannot use the %Frobenius automorphism.  
%\end{rem}

\subsection{The identity component of the N\'eron model} \label{sub:NerCdefinable}

With $E/L/F$ and $\bT$ parameterized and $\bT(F)$ definable, we may now prove the main technical result of the paper.
Write $\Ner{T}$ for the N\'eron model of $\bT$ (c.f. \cite{bosch-lutkebohmert-raynaud:neron}*{Ch. 10}); this is a model for $\bT$ over $\ri_F$ with the property that $\Ner{T}(\ri_F) = \bT(F)$.  Let $\NerC{T}$ be its identity component.

\begin{prop} \label{prop:NerCdefinable}
The subset $\NerC{T}(\ri_F) \subseteq \bT(F)$ is definable.
\end{prop}
\begin{proof}
We first reduce to the case that $L = F$: if $\NerC{T}(\ri_L)$ is definable then so is $\NerC{T}(\ri_F) = \NerC{T}(\ri_L)^\Gamma$, since N\'eron models commute with unramified base change.  So for the remainder of the proof we will assume that $E/F$ is totally ramified.

Now, the identity component $\NerC{T}(\ri_F)$ is the kernel of the map $w_\bT : \bT(L) \to X_I$ from $\Ner{T}(\ri_L)$ to its component group (c.f. \citelist{\cite{bitan}*{3.1} \cite{kottwitz:isocrystals-2}*{\S 7}}).

Our fixed choice of resolution $Y \to X$ yields an induced torus $\bR$ over $L$ with cocharacter lattice $Y$, together with a diagram
\[
\begin{tikzcd}
\bR(L) \rar{\alpha} \dar{w_{\bR}} \drar{\beta} & \bT(L) \rar \dar{w_{\bT}} & 1 \\
Y_I \rar & X_I \rar & 0
\end{tikzcd}
\]
as in \cite{kottwitz:isocrystals-2}*{(7.2.6)}.  The map $\bR(L) = (E^\times \times Y)^I \to (E^\times \times X)^I = \bT(L)$
is definable since it is induced by the fixed map $Y \to X$.  Since $\bR$ is induced,
$Y_I$ is torsion free and $w_\bR : \bR(L) \to Y_I = \Hom(X^\ast(\bR), \Z)$ is given by
$r \mapsto \left(\lambda \mapsto \ord_{L}(\lambda(r))\right)$ \cite{kottwitz:isocrystals-2}*{(7.2.3)}.
Therefore $w_\bR$ is definable, and so is the composition $\beta : \bR(L) \to X_I$ with the fixed map $Y_I \to X_I$.

We may now show that $\NerC{T}(\ri_L)$ is a definable subset of $\bT(L)$: we have $t \in \NerC{T}(\ri_L)$ if and only if $\exists r \in \bR(L)$ such that $\alpha(r) = t$ and $\beta(r) = 0$.
\end{proof}

\section{General reductive groups}
%{\bf XX Here want to prove that $G_{x, 0}$ is definable; canonical measure is motivic; formal degree is motivic. } 
Here we prove that the parahoric ${G}_{\ff}:={\bG}(F)_{x, 0}$ (with $x$ in the interior of the facet $\ff$)   is definable for  all facets $\ff$.  
It was previously shown in \cite{CGH-2} that for all \emph{positive} $r>0$ and all {optimal} points $x$ in the building, the Moy-Prasad filtration subgroups ${\bG}(F)_{x, r}$ are definable; here we fill in the last missing case, namely, $r=0$ (note that when $r=0$, the group ${\bG}(F)_{x,0}$ depends only on the facet containing $x$; thus, we do not need to worry about optimal points).

\subsection{Reductive groups as a family of definable sets}
We treat reductive groups in the definable setting as in \cite{hales:transfert} and \cite{CGH-2}.
In fact, our construction of algebraic tori above in \S \ref{sub:def_tori} is a special case of this construction. 
In particular, we have the \emph{fixed choices} that include the absolute root datum $\Sigma$ of $\bG$ %and the root datum of $\bG$ over the maximal unramified extension, 
and  the Galois action on the absolute root datum  (which we suppress from the notation). Finally, given $\Sigma$, we can also fix, as part of the \emph{fixed choices},  a finite set, which we shall here denote by 
$\cF_\Sigma$, that encodes the set of faces of an alcove in the building of $\bG$, as in \cite{hales:transfert}*{\S 2.1} (this follows from the description of parahoric subgroups in  \cite{gross:parahorics}).  
%over the maximal unramified extension, .

We recall that each  fixed choice determines  a split reductive group $\bG^{\ast\ast}$ and an embedding 
$\bG^{\ast\ast}(F)\hookrightarrow {\mathbf GL}_N(F)$ for every local field $F$ of sufficiently large residue characteristic.  
Moreover, as in \cite{hales:transfert}*{\S 2.2}, we  have a parameter space $Z$ that encodes field extensions and Galois cocycles, so that a pair 
$(\Sigma, z)\in Z$ determines a connected reductive group $\bG(F)$ for every local field $F$ of sufficiently large residue characteristic, and every reductive group (up to isomorphism)  arises via this construction. 
(We recall that here $\Sigma$ is a fixed choice determining $\bG^{\ast\ast}$, and $z$ is a parameter that ranges over $F^m$ for some $m$ and determines a field extension over which $\bG$ splits, and the Galois cocycle that corresponds to $\bG$). 
In summary, we have the following 
\begin{theorem}\label{thm:def_groups}(\cite{hales:transfert}*{\S 2.2.2}, \cite{CGH-2}*{\S 3.1}). 
 For every fixed choice $\Sigma$ of a root datum there exists $M>0$ that depends only on 
$\Sigma$, and a  definable set $\cG \to Z$, such that 
for every $F\in \loc_M$, for every $z\in Z(F)$, ${\cG_z}(F)$ is the set of $F$-points of a connected reductive group $\bG_z$ with absolute root datum $\Sigma$, and all $F$-groups with absolute root datum 
$\Sigma$ up to $F$-isomorphism arise as fibres $\cG_z$ for some $z\in Z(F)$.  
\end{theorem}
%a family of  motivic measures $d\mu_z$ on $G_z$, and a motivic function $c:Z\to A$, such that 


\subsection{Definability of maximal parahorics} 
Our main result is that 
the parahoric subgroup $\bG(F)_\ff$ associated with $\ff$ via Bruhat-Tits theory is definable.  
More precisely, let $\bG$ be a tamely ramified quasi-split connected reductive group defined over a local field $F$. Let $\ff$ be a facet in the building of $\bG$.  The next proposition shows that
then the parahoric $\bG(F)_\ff\subset \bG(F)$ arises in a definable family of definable sets. 
In particular, the canonical parahoric of $\bG(F)$ defined in \cite{gross:motive} is definable. 
%which a reductive group with a given definable family of definable sets $G(F)$ that

\begin{prop} Let $\Sigma$, $Z$ and $\cG\to Z$ be as above in Theorem \ref{thm:def_groups}.
Let $\cF_{\Sigma}$ be the fixed choice parametrizing the facets of an alcove in the building of $\bG$, as above.  
There exists $M>0$ that depends only on $\Sigma$, and for every $\ff\in \cF_\Sigma$, a family of definable subsets $\cG_{\ff} \to Z$ of $\cG$, such that for all $F\in \loc_M$, for all $z\in Z(F)$, 
$${\cG_{\ff}}_{z}(F)= \bG_z(F)_{\ff}.$$
\end{prop}

\begin{proof} Let $\bT$ be a maximal torus containing the maximal $F$-split torus in $\bG$; let $x$ be the baricentre of $\ff$.
By definition, $\bG(F)_{x,0}$ is generated by $\bT(F)_{x, 0}$ and $U_\psi$, where $U_\psi$ are the filtration subgroups of the unipotent one-parameter subgroups $U_{\alpha}$. 
We have shown in Proposition \ref{prop:NerCdefinable} above that  $\bT(F)_{x, 0}$ is definable. The rest of the proof is identical to that of Lemma 3.4 in \cite{CGH-2}.  
\end{proof} 

\subsection{Applications} 
As an immediate consequence, we obtain that the canonical measure is motivic, up to a motivic constant. 
We recall that a \emph{motivic constant} is an element of the ring of constructible motivic functions on a point, i.e.,  of $A:=\Z[\lef, \lef^{-1}, \frac{1}{1-\lef^{-i}}, i>0]$. 
This statement was previously known for unramified reductive groups, \cite{cluckers-hales-loeser}. 

For a connected reductive group $G$ over a local field $F$, we denote the \emph{canonical Haar measure} on $G(F)$, which assigns volume $1$ to the canonical parahoric, by $d\mu_G^\can$. 
Note that this seems to be the standard definition of the canonical measure in the literature nowadays, but it differs from the measure called canonical in \cite{gross:motive} exactly by the $L$-factor of the motive associated with $\bG$. 

\begin{theorem}\label{thm:mot_meas}
 Let $\Sigma$, $Z$  and $\cG \to Z$ be as in Theorem \ref{thm:def_groups} above. 
Then there exists $M>0$ that depends only on 
$\Sigma$, a family of  motivic measures $d\mu_z$ on $\cG_z$, and a motivic function $c:Z\to A$, such that for every $F\in \loc_M$,
$$c_F(z) d\mu_{G_z}^\can = d\mu_{z, F}.$$ 
Here $d\mu_{G_z}^\can$ on the left-hand side is the canonical measure, in the sense of Gross, on 
$\bG_z(F)=\cG_z(F)$, and $d\mu_{z, F}$ on the right is the specialization to $F$ of the motivic measure $d\mu_z$ on the definable set $\cG_z$. 
\end{theorem} 

\begin{proof} There is exists a motivic Haar measure on $G_z$ for every $z\in Z(F)$, constructed e.g. in \cite{hales:transfert}*{\S 2.3}. Let us denote this measure by $\mu_z^\mot$.  Then, since the canonical parahoric $\bG_z(F)_{x, 0}$ is definable, $c(z):=\vol_{\mu_z}(\bG_z(F)_{x, 0})$ is a motivic function of $z$. 
By definition, we have 
$$c_F(z) d\mu_{G_z}^\can = d\mu_{z, F}^\mot.$$ 
\end{proof}

\begin{rem} The above theorem allows a number of improvements in \cite{CGH-2} and 
\cite{S-T}*{Appendix B}. 
Namely,  parts (1) and (2) of \cite{CGH-2}*{Lemma 3.4} become unnecessary, and the statement in Part (3) now includes $r=0$; instead of using the measures discussed in \S 3.5.2, one can use the canonical measure. 
More importantly, in \cite{S-T}*{Appendix B, \S B.5.2}, Definition 14.13 and Lemma 14.14 become unnecessary, and in all calculations one can take $i_M=1$, which simplifies the rest of the proof.
\end{rem}

Finally, Theorem \ref{thm:mot_meas} implies that formal degree in definable families of supercuspidal representations is a motivic function of the parameters indexing the family. 
Recall that formal degree of a representation depends on the choice of Haar measure. 
In the following corollary, we use the canonical measure. 
 
\begin{cor} Let $\Sigma$, $Z$  and $\cG \to Z$ be as in Theorem \ref{thm:def_groups} above. 
Suppose that for $F\in \loc_M$ for some $M>0$, we are given a family $\pi_{z, \lambda}$ of irreducible supercuspidal representations of $G_z$, for $z\in Z(F)$, of the form 
$\pi_{z, \lambda,F} = \ind_{J_{z,\lambda}}^{G_z(F)} \sigma_{z, \lambda}$, 
where $\lambda$ is some parameter ranging over a definable set, $J_{z,\lambda}\subset G_z$ 
is a family of definable subgroups, and for each $z, \lambda$, $\sigma_{z,\lambda}$ is an irredcuible representation $J_{z, \lambda}$ of fixed degree $d$. 
Then the formal degree (with respect to the canonical measure as above) of $\pi_{z, \lambda}$ is of the form 
$$d_{\pi_{z, \lambda}}=\frac{c(z)d}{m(z, \lambda)},$$ where
$c(z)$ is the motivic function of Theorem \ref{thm:mot_meas}, and $m(z, \lambda)$ is a  motivic function of $z, \lambda$. 
\end{cor}
\begin{proof}
It is well-known ({\bf XX: Reference?})  that
$$ d_{\pi_{z, \lambda}}=\frac{\deg(\sigma_{z, \lambda})}{\vol_{\mu^\can}(J_{z, \lambda})}.$$
By Theorem \ref{thm:mot_meas}, we have 
$\vol_{\mu^\can}(J_{z, \lambda}) = \frac{\vol_{\mu_z^\mot}(J_{z, \lambda})}{c(z)}$, and the statement follows, with $m(z, \lambda)=\vol_{\mu_z^\mot}(J_{z, \lambda})$.
\end{proof}

\begin{bibdiv}
\begin{biblist}
\bibselect{references}
\end{biblist}
\end{bibdiv}

\end{document}





























